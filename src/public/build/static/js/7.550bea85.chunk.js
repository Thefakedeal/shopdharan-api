(this.webpackJsonpwebsite=this.webpackJsonpwebsite||[]).push([[7],{100:function(e){e.exports=JSON.parse('{"ADMIN":"admin","EMPLOYEE":"employee","SUPPLIER":"supplier","USER":"user"}')},101:function(e){e.exports=JSON.parse('{"Login":"/","SignUp":"/signup","RequestPin":"/requestpin","ResetPassword":"/resetpassword"}')},109:function(e,t){e.exports={validateEmail:function(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())},validatePassword:function(e){return e.length>=6}}},162:function(e,t,a){e.exports=a.p+"static/media/shopdharan.f6198331.png"},163:function(e,t,a){e.exports=a.p+"static/media/shopdharan-white.24657495.png"},164:function(e,t,a){e.exports=a.p+"static/media/placeholder.b35d838f.jpeg"},218:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(11),i=a(83),o=a(113),l=a(81),s=a.n(l),u=a(82);function d(e){return p.apply(this,arguments)}function p(){return(p=Object(u.a)(s.a.mark((function e(t){var a,r,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={refreshToken:t},e.next=3,fetch("/api/token",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(a)});case 3:if((r=e.sent).ok){e.next=6;break}throw r.statusText;case 6:return e.next=8,r.json();case 8:return n=e.sent,e.abrupt("return",n.accessToken);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var m=n.a.createContext(),f=n.a.createContext(),b=n.a.createContext(),h=n.a.createContext(),E=n.a.createContext(),v=n.a.createContext();function g(){var e=Object(r.useContext)(E),t=Object(i.a)(e,2);return{accessToken:t[0],setAccessToken:t[1]}}function w(){var e=Object(r.useContext)(h),t=Object(i.a)(e,2);return{refreshToken:t[0],setRefreshToken:t[1]}}function O(){return Object(r.useContext)(f)}function x(){var e=Object(r.useContext)(v),t=Object(i.a)(e,2);return{continueWithoutLogin:t[0],setContinueWithoutLogin:t[1]}}function j(e){var t=e.children,a=Object(r.useState)(!0),c=Object(i.a)(a,2),l=c[0],s=c[1],u=Object(r.useState)(!1),p=Object(i.a)(u,2),g=p[0],w=p[1],O=Object(r.useState)(""),x=Object(i.a)(O,2),j=x[0],y=x[1],k=Object(r.useState)(Boolean(JSON.parse(sessionStorage.getItem("continuewithoutlogin")))||!1),_=Object(i.a)(k,2),C=_[0],S=_[1],T=Object(r.useState)(localStorage.getItem("refreshToken")),P=Object(i.a)(T,2),R=P[0],N=P[1],A=Object(r.useState)(sessionStorage.getItem("accessToken")),I=Object(i.a)(A,2),D=I[0],q=I[1];return Object(r.useEffect)((function(){sessionStorage.setItem("continuewithoutlogin",C)}),[C]),Object(r.useEffect)((function(){localStorage.setItem("refreshToken",R)}),[R]),Object(r.useEffect)((function(){sessionStorage.setItem("accessToken",D)}),[D]),Object(r.useEffect)((function(){if(!R)return s(!1),w(!1),void y("");d(R).then((function(e){var t=Object(o.a)(e);y(t.role),s(!1),w(!0),q(e)})).catch((function(e){console.log(e),s(!1),w(!1)}))}),[R]),n.a.createElement(m.Provider,{value:l},n.a.createElement(f.Provider,{value:g},n.a.createElement(b.Provider,{value:j},n.a.createElement(h.Provider,{value:[R,N]},n.a.createElement(E.Provider,{value:[D,q]},n.a.createElement(v.Provider,{value:[C,S]},t))))))}var y=a(102),k=n.a.createContext();function _(){var e=Object(r.useContext)(k),t=Object(i.a)(e,5);return{cart:t[0],addToCart:t[1],updateCartItemQuantity:t[2],removeFromCart:t[3],clearCart:t[4]}}function C(e){var t=e.children,a=Object(r.useState)(JSON.parse(localStorage.getItem("cart"))||[]),c=Object(i.a)(a,2),o=c[0],l=c[1];function s(e,t){t<=0||l((function(a){return a.map((function(a){return a.product_id===e?{product_id:a.product_id,quantity:parseInt(t)}:a}))}))}return Object(r.useEffect)((function(){localStorage.setItem("cart",JSON.stringify(o))}),[o]),n.a.createElement(k.Provider,{value:[o,function(e,t){if(!(t<=0)){var a=o.find((function(t){return t.product_id===e.product_id}));if(a){var r=parseInt(a.quantity)+parseInt(t);s(e.product_id,r)}else l((function(a){return[].concat(Object(y.a)(a),[{product_id:e.product_id,quantity:parseInt(t)}])}))}},s,function(e){l((function(t){return t.filter((function(t){return t.product_id!==e}))}))},function(){l([])}]},t)}var S=a(84),T=n.a.createContext(),P="setall",R="setcity";function N(e,t){switch(t.type){case P:return Object(S.a)({},t.payload);case R:return Object(S.a)(Object(S.a)({},e),{},{city_id:t.payload});default:return e}}function A(){var e=Object(r.useContext)(T),t=Object(i.a)(e,2);return{settings:t[0],dispatch:t[1]}}function I(e){var t=e.children,a=Object(r.useReducer)(N,{city_id:""}),c=Object(i.a)(a,2),o=c[0],l=c[1];return Object(r.useEffect)((function(){l({type:P,payload:JSON.parse(localStorage.getItem("settings"))})}),[]),Object(r.useEffect)((function(){localStorage.setItem("settings",JSON.stringify(o))}),[o]),n.a.createElement(T.Provider,{value:[o,l]},t)}var D=a(100),q=a(31),W=a(2),L=a(16),M=a(75),U=a(162),F=a.n(U),Y=a(163),J=a.n(Y),B=Object(M.a)({logo:{width:"80vmin",padding:50,objectFit:"contain"}});function H(e){var t=e.variant,a=void 0===t?"white":t,r=Object(L.a)(e,["variant"]),c=B(),i="white"===a.toLowerCase()?J.a:F.a;return n.a.createElement("img",Object.assign({src:i,className:c.logo},r,{alt:"Shop Dharan"}))}var V=a(95),z=a(189),Q=Object(M.a)({fullscreen:{display:"flex",flexDirection:"column",backgroundColor:V.PRIMARY_WHITE,flex:1,marginLeft:"auto",marginRight:"auto",overflowY:"auto",maxWidth:800,overflowX:"hidden",minHeight:"100vh"}});function G(e){var t=e.children,a=Q();return n.a.createElement(z.a,{className:a.fullscreen},t)}var X=a(85),Z=a(101),$=a(191),K=Object(M.a)({text:{fontWeight:"bold","&:hover":{textDecoration:"underline",cursor:"pointer"}}});function ee(e){var t=e.children,a=Object(L.a)(e,["children"]),r=K();return n.a.createElement($.a,Object.assign({color:"primary",className:r.text},a),t)}var te=a(77);function ae(e){var t=e.loading,a=void 0===t||t,r=e.color,c=e.center,i=Object(L.a)(e,["loading","color","center"]);return a?n.a.createElement(te.a,Object.assign({color:r||"primary",style:c&&{marginLeft:"auto",marginRight:"auto"}},i)):null}function re(e){var t=e.children;return n.a.createElement($.a,{color:"primary"},t)}function ne(e){var t=e.errors,a=void 0===t?[]:t;return a.length>0?a.map((function(e,t){return n.a.createElement(re,{key:t},e.toString())})):null}var ce=a(224),ie=Object(M.a)({input:{margin:"1rem",width:"80vmin"}});function oe(e){var t=e.label,a=e.type,r=e.value,c=e.onChange,i=e.onBlur,o=e.required,l=e.multiline,s=e.rowsMax,u=Object(L.a)(e,["label","type","value","onChange","onBlur","required","multiline","rowsMax"]),d=ie();return n.a.createElement(ce.a,Object.assign({label:t,variant:"outlined",type:a,className:d.input,value:r,multiline:l,rowsMax:s,onChange:c,onBlur:i,required:o},u))}var le=Object(M.a)({container:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:10}});function se(e){var t=e.children,a=le();return n.a.createElement(z.a,{className:a.container},t)}var ue=a(190),de=Object(M.a)({button:{margin:20,padding:5}});function pe(e){var t=e.children,a=e.onClick,r=e.variant,c=void 0===r?"contained":r,i=Object(L.a)(e,["children","onClick","variant"]),o=de();return n.a.createElement(ue.a,Object.assign({className:o.button,variant:c,color:"primary",onClick:a},i),n.a.createElement("b",null,t))}function me(e){return fe.apply(this,arguments)}function fe(){return(fe=Object(u.a)(s.a.mark((function e(t){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/user/login",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)});case 2:if((a=e.sent).ok){e.next=7;break}return e.next=6,a.text();case 6:throw e.sent;case 7:return e.next=9,a.json();case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function be(){var e=Object(W.f)(),t=Object(r.useState)(""),a=Object(i.a)(t,2),c=a[0],o=a[1],l=w().setRefreshToken,d=g().setAccessToken,p=x().setContinueWithoutLogin;return n.a.createElement(se,null,n.a.createElement(X.b,{initialValues:{email_id:"",password:""},onSubmit:function(){var e=Object(u.a)(s.a.mark((function e(t,a){var r,n,c,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.setSubmitting,e.prev=1,r(!0),e.next=5,me(t);case 5:n=e.sent,c=n.accessToken,i=n.refreshToken,d(c),l(i),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),o(e.t0);case 15:return e.prev=15,r(!1),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[1,12,15,18]])})));return function(t,a){return e.apply(this,arguments)}}()},(function(t){var a=t.isSubmitting,r=t.handleSubmit;return n.a.createElement(n.a.Fragment,null,n.a.createElement(ae,{loading:a}),n.a.createElement(ne,{errors:[c]}),n.a.createElement(X.a,{name:"email_id",type:"text",label:"Email",required:!0,as:oe}),n.a.createElement(X.a,{name:"password",type:"password",label:"Password",required:!0,as:oe}),n.a.createElement(pe,{type:"submit",onClick:r},"Login"),n.a.createElement(ee,{onClick:function(){p(!0)}}," ","Continue Without Login"," "),n.a.createElement(ee,{onClick:function(){e.push(Z.RequestPin)}},"Forgot Password?"),n.a.createElement(ee,{onClick:function(){e.push(Z.SignUp)}}," ","Not A User?"," "))})))}var he=a(109);function Ee(e){return ve.apply(this,arguments)}function ve(){return(ve=Object(u.a)(s.a.mark((function e(t){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/user/signup",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)});case 2:if((a=e.sent).ok){e.next=7;break}return e.next=6,a.text();case 6:throw e.sent;case 7:return e.next=9,a.json();case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ge(){var e=Object(W.f)(),t=Object(r.useState)(""),a=Object(i.a)(t,2),c=a[0],o=a[1],l=w().setRefreshToken,d=g().setAccessToken;return n.a.createElement(se,null,n.a.createElement(X.b,{initialValues:{user_name:"",email_id:"",password:"",repassword:"",mobile_number:""},validate:function(e){var t={};return Object(he.validateEmail)(e.email_id)||(t.email_id="Invalid Email"),Object(he.validatePassword)(e.password)||(t.password="Password Must Be Atleast 6 characters"),e.password!==e.repassword&&(t.repassword="Passwords Donot Match"),10!==e.mobile_number.length&&(t.mobile_number="Mobile Number Must Be 10 digits long"),0===e.mobile_number.length&&(t.mobile_number="Mobile Number is Required"),/^\d+$/.test(e.mobile_number)||(t.mobile_number="Invalid Mobile number"),0===e.user_name.length&&(t.user_name="Name is Required"),t},onSubmit:function(){var t=Object(u.a)(s.a.mark((function t(a,r){var n,c,i,u;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.setSubmitting,t.prev=1,n(!0),t.next=5,Ee(a);case 5:c=t.sent,i=c.accessToken,u=c.refreshToken,d(i),l(u),e.push("/"),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(1),o(t.t0);case 16:return t.prev=16,n(!1),t.finish(16);case 19:case"end":return t.stop()}}),t,null,[[1,13,16,19]])})));return function(e,a){return t.apply(this,arguments)}}()},(function(t){var a=t.isSubmitting,r=t.handleSubmit,i=t.errors;return n.a.createElement(n.a.Fragment,null,n.a.createElement(ae,{loading:a}),n.a.createElement(ne,{errors:[c]}),n.a.createElement(X.a,{name:"user_name",type:"text",label:"Name",error:!!i.user_name,helperText:i.user_name,required:!0,as:oe}),n.a.createElement(X.a,{name:"email_id",type:"text",label:"Email",error:!!i.email_id,helperText:i.email_id,required:!0,as:oe}),n.a.createElement(X.a,{name:"mobile_number",type:"tel",label:"Mobile No.",error:!!i.mobile_number,helperText:i.mobile_number,required:!0,as:oe}),n.a.createElement(X.a,{name:"password",type:"password",label:"Password",error:!!i.password,helperText:i.password,required:!0,as:oe}),n.a.createElement(X.a,{name:"repassword",type:"password",label:"Retype Password",error:!!i.repassword,helperText:i.repassword,required:!0,as:oe}),n.a.createElement(pe,{type:"submit",onClick:r},"Sign Up"),n.a.createElement(ee,{onClick:function(){e.push(Z.Login)}},"Already A User?"))})))}var we=a(192),Oe=Object(M.a)({container:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:10}});function xe(e){var t=e.children,a=Oe();return n.a.createElement(we.a,{className:a.container},t)}function je(e){return ye.apply(this,arguments)}function ye(){return(ye=Object(u.a)(s.a.mark((function e(t){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/user/requestpin",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)});case 2:return a=e.sent,e.abrupt("return",a.ok);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ke(){var e=Object(W.f)(),t=Object(r.useState)(""),a=Object(i.a)(t,2),c=a[0],o=a[1];return n.a.createElement(se,null,n.a.createElement(X.b,{initialValues:{email_id:""},validate:function(e){var t={};return Object(he.validateEmail)(e.email_id)||(t.email_id="Invalid Email"),t},onSubmit:function(){var t=Object(u.a)(s.a.mark((function t(a,r){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.setSubmitting,t.prev=1,n(!0),t.next=5,je(a);case 5:if(!t.sent){t.next=8;break}return t.abrupt("return",e.push(Z.ResetPassword));case 8:alert("Failed To Send Email Please Try Again"),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),o(t.t0);case 14:return t.prev=14,n(!1),t.finish(14);case 17:case"end":return t.stop()}}),t,null,[[1,11,14,17]])})));return function(e,a){return t.apply(this,arguments)}}()},(function(t){var a=t.isSubmitting,r=t.handleSubmit,i=t.errors;return n.a.createElement(n.a.Fragment,null,n.a.createElement(ae,{loading:a}),n.a.createElement(ne,{errors:[c]}),n.a.createElement(X.a,{name:"email_id",type:"text",label:"Email",error:!!i.email_id,helperText:i.email_id,required:!0,as:oe}),n.a.createElement(pe,{type:"submit",onClick:r},"Request Reset Pin From Email"),n.a.createElement(ee,{onClick:function(){e.push(Z.ResetPassword)}}," ","Already Have A Pin?"," "),n.a.createElement(ee,{onClick:function(){e.push(Z.Login)}}," ","Back To Login"," "))})))}function _e(e){return Ce.apply(this,arguments)}function Ce(){return(Ce=Object(u.a)(s.a.mark((function e(t){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/user/resetpassword",{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)});case 2:if((a=e.sent).ok){e.next=7;break}return e.next=6,a.text();case 6:throw e.sent;case 7:return e.abrupt("return",a.ok);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Se(){var e=Object(W.f)(),t=Object(r.useState)(""),a=Object(i.a)(t,2),c=a[0],o=a[1];return n.a.createElement(se,null,n.a.createElement(X.b,{initialValues:{email_id:"",new_password:"",renew_password:"",pin:""},validate:function(e){var t={};return Object(he.validateEmail)(e.email_id)||(t.email_id="Invalid Email"),Object(he.validatePassword)(e.new_password)||(t.new_password="Password Must Be Atleast 6 characters"),e.new_password!==e.renew_password&&(t.renew_password="Passwords Donot Match"),t},onSubmit:function(){var t=Object(u.a)(s.a.mark((function t(a,r){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.setSubmitting,t.prev=1,n(!0),t.next=5,_e(a);case 5:t.sent&&e.push(Z.Login),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),o(t.t0);case 12:return t.prev=12,n(!1),t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[1,9,12,15]])})));return function(e,a){return t.apply(this,arguments)}}()},(function(t){var a=t.isSubmitting,r=t.handleSubmit,i=t.errors;return n.a.createElement(n.a.Fragment,null,n.a.createElement(ae,{loading:a}),n.a.createElement(ne,{errors:[c]}),n.a.createElement(X.a,{name:"email_id",type:"text",label:"Email",error:!!i.email_id,helperText:i.email_id,required:!0,as:oe}),n.a.createElement(X.a,{name:"new_password",type:"password",label:"New Password",error:!!i.new_password,helperText:i.new_password,required:!0,as:oe}),n.a.createElement(X.a,{name:"renew_password",type:"password",label:"Retype Password",error:!!i.renew_password,helperText:i.renew_password,required:!0,as:oe}),n.a.createElement(X.a,{name:"pin",type:"text",label:"Pin",required:!0,as:oe}),n.a.createElement(pe,{type:"submit",onClick:r},"Reset Password"),n.a.createElement(ee,{onClick:function(){e.push(Z.RequestPin)}},"Didn't Recieve Pin?"),n.a.createElement(ee,{onClick:function(){e.push(Z.Login)}},"Back To Login"))})))}function Te(){return n.a.createElement(G,null,n.a.createElement(xe,null,n.a.createElement(H,{variant:"red"}),n.a.createElement(q.a,null,n.a.createElement(W.c,null,n.a.createElement(W.a,{path:Z.SignUp,component:ge}),n.a.createElement(W.a,{path:Z.RequestPin,component:ke}),n.a.createElement(W.a,{path:Z.ResetPassword,component:Se}),n.a.createElement(W.a,{path:Z.Login,component:be})))))}var Pe=a(90);function Re(e){var t=Object(r.useState)(!0),a=Object(i.a)(t,2),n=a[0],c=a[1],o=Object(r.useState)(),l=Object(i.a)(o,2),d=l[0],p=l[1],m=Object(r.useState)(""),f=Object(i.a)(m,2),b=f[0],h=f[1];return Object(r.useEffect)((function(){(function(){var t=Object(u.a)(s.a.mark((function t(){var a,r,n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={method:"GET",headers:{"content-type":"application/json"}},t.next=3,fetch(e,a);case 3:if((r=t.sent).ok){t.next=8;break}return h(r.statusText),c(!1),t.abrupt("return");case 8:return t.next=10,r.json();case 10:n=t.sent,p(n),c(!1);case 13:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()().catch((function(e){h(e),c(!1)}))}),[e]),{loading:n,result:d,err:b}}var Ne=a(165),Ae=a(203),Ie=a(204),De=a(205),qe=Object(M.a)({card:{width:320,height:320},container:{width:320,height:320,padding:10,margin:10},image:{height:200,width:300,padding:10}});function We(e){var t=e.title,a=e.description,r=e.imageURI,c=e.id,i=Object(W.f)(),o=qe();return n.a.createElement(Ne.a,{className:o.container},n.a.createElement(Ae.a,{className:o.card,onClick:function(){i.push("/suppliers/".concat(c))}},n.a.createElement(Ie.a,{title:t,subheader:a}),n.a.createElement(De.a,{className:o.image,image:r,title:t})))}var Le=Object(M.a)({text:{fontWeight:"bold",fontSize:35}});function Me(e){var t=e.children,a=Object(L.a)(e,["children"]),r=Le();return n.a.createElement($.a,Object.assign({color:"primary",variant:"h5",className:r.text},a),t)}var Ue=Object(M.a)({container:{display:"flex",flex:1,flexWrap:"nowrap",overflowX:"auto",marginBottom:20,width:"100%"}});function Fe(e){var t=e.catagory_id,a=e.catagory_name,r=e.city_id,c=Ue(),i=function(e){var t=e.visible,a=e.city_id,r=e.catagory_id,n=e.supplier_name,c=new URLSearchParams;a&&c.append("city_id",a),null!=t&&c.append("visible",t),r&&c.append("catagory_id",r),n&&c.append("supplier_name",n);var i=Re("/api/suppliers/getall?".concat(c));return{err:i.err,loading:i.loading,result:i.result}}({visible:!0,city_id:r,catagory_id:t}),o=i.err,l=i.loading,s=i.result,u=void 0===s?[]:s;return l?n.a.createElement(ae,{loading:l}):o?n.a.createElement(ne,{errors:[o]}):u.length>0?n.a.createElement("div",null,n.a.createElement(Me,null," ",a),n.a.createElement("div",{className:c.container},u.map((function(e){return n.a.createElement(We,{id:e.supplier_id,description:e.supplier_description,title:e.supplier_name,imageURI:"/images/".concat(e.image_id)})})))):null}var Ye=a(185),Je=a(227),Be=a(220),He=a(200),Ve=Object(M.a)((function(e){return{formControl:{margin:e.spacing(1),minWidth:120}}}));function ze(e){var t=e.value,a=e.setValue,r=Ve(),c=function(){var e=Re("/api/cities/getall");return{loading:e.loading,result:e.result,err:e.err}}(),i=c.err,o=c.loading,l=c.result,s=void 0===l?[]:l;return o?n.a.createElement(ae,{loading:!0}):i?n.a.createElement(ne,{errors:[i,"Can't Display Catagories"]}):(!t&&s.length>0&&a(s[0].city_id),n.a.createElement(Ye.a,{className:r.formControl},n.a.createElement(Je.a,{id:"demo-simple-select-label"},"city"),n.a.createElement(Be.a,{labelId:"city",value:t,onChange:function(e){a(e.target.value)}},s.map((function(e){return n.a.createElement(He.a,{key:e.city_id,value:e.city_id},String(e.city_name))})))))}var Qe=a(193),Ge=a(215);function Xe(e){return String(e).split(" ").map((function(e){var t=e.toLowerCase();return t.charAt(0).toUpperCase()+t.slice(1)})).join(" ")}var Ze=a(201),$e=a(213),Ke=a(214),et=a(229),tt=a(206),at=a(207),rt=a(208),nt=a(209),ct=a(210),it=a(211),ot=a(212);function lt(e){switch(e.title){case Pe.Home:return n.a.createElement(tt.a,null);case Pe.Search:return n.a.createElement(at.a,null);case Pe.Cart:return n.a.createElement(rt.a,null);case Pe.Address:return n.a.createElement(nt.a,null);case Pe.Orders:return n.a.createElement(ct.a,null);case Pe.User:return n.a.createElement(it.a,null);default:return n.a.createElement(ot.a,null)}}function st(e){var t=e.title,a=e.link,r=Object(W.f)();return n.a.createElement(Ze.a,{button:!0,onClick:function(){r.push(a)}},n.a.createElement($e.a,null,n.a.createElement(lt,{title:a})),n.a.createElement(Ke.a,null," ",Xe(t)," "))}function ut(e){var t=e.open,a=e.onClose,r=Object.entries(Pe);return n.a.createElement(et.a,{anchor:"top",open:t,onClose:a},r.map((function(e){var t=Object(i.a)(e,2),a=t[0],r=t[1];return n.a.createElement(st,{key:a,title:a,link:r})})))}var dt=Object(M.a)({nav:{display:"flex",minHeight:"3em",alignItems:"center",justifyContent:"space-between",marginBottom:"1em",backgroundColor:V.PRIMARY_RED,width:"100%"},title:{marginLeft:"auto",marginRight:"auto",color:V.PRIMARY_WHITE,fontSize:"25px",fontWeight:"bold"}});function pt(e){var t=e.title,a=void 0===t?"Shop Dharan":t,c=Object(W.f)(),o=dt(),l=Object(r.useState)(!1),s=Object(i.a)(l,2),u=s[0],d=s[1],p=function(){d((function(e){return!e}))};return Object(r.useEffect)((function(){return document.title=a,function(){document.title="Shop Dharan"}}),[a]),n.a.createElement("nav",{className:o.nav},n.a.createElement(Qe.a,{color:"secondary",fontSize:"large",onClick:c.goBack}),n.a.createElement("div",{className:o.title},a),n.a.createElement(Ge.a,{onClick:p,color:"secondary",fontSize:"large"}),n.a.createElement(ut,{open:u,onClose:p}))}function mt(){var e=function(){var e=Re("/api/catagories/getall");return{loading:e.loading,result:e.result,err:e.err}}(),t=e.loading,a=e.err,r=e.result,c=void 0===r?[]:r,i=A(),o=i.settings,l=i.dispatch;return t?n.a.createElement(ae,{loading:t,style:{marginLeft:"auto",marginRight:"auto"}}):a?n.a.createElement(ne,{errors:[a]}):n.a.createElement(G,null,n.a.createElement(pt,{title:"Home"}),n.a.createElement(ze,{value:o.city_id,setValue:function(e){l({type:R,payload:e})}}),c.map((function(e){return n.a.createElement(Fe,{catagory_id:e.catagory_id,catagory_name:e.catagory_name,city_id:o.city_id})})))}var ft=a(164),bt=a.n(ft),ht=Object(M.a)({image:{height:200,width:300,objectFit:"cover",backgroundColor:V.PRIMARY_WHITE}});function Et(e){var t=e.src,a=e.alt,r=Object(L.a)(e,["src","alt"]),c=ht();return n.a.createElement("img",Object.assign({src:t,className:c.image,alt:a||"Shop Dharan"},r,{onError:function(e){return e.target.src=bt.a}}))}function vt(e){var t=e.supplier;return n.a.createElement(se,null,n.a.createElement(Me,null," ",Xe(t.supplier_name)," "),n.a.createElement(Et,{src:"/images/".concat(t.image_id)}),n.a.createElement("p",{style:{maxWidth:400,textAlign:"center",fontWeight:"bold"}},t.supplier_description))}var gt=Object(M.a)({card:{width:320,height:320},container:{width:320,height:320,padding:10,margin:10},image:{height:200,width:300,padding:10}});function wt(e){var t=e.title,a=e.description,r=e.imageURI,c=e.id,i=Object(W.f)(),o=gt();return n.a.createElement(Ne.a,{className:o.container},n.a.createElement(Ae.a,{className:o.card,onClick:function(){i.push("/products/".concat(c))}},n.a.createElement(Ie.a,{title:t,subheader:"Rs. ".concat(a)}),n.a.createElement(De.a,{className:o.image,image:r,title:t})))}var Ot=Object(M.a)({container:{display:"flex",width:"100%",flexWrap:"wrap"}});function xt(e){var t=e.products,a=void 0===t?[]:t,r=Ot();return n.a.createElement(we.a,{className:r.container},a.map((function(e){return n.a.createElement(wt,{id:e.product_id,description:e.price,title:e.product_name,imageURI:"/images/".concat(e.image_id),key:e.product_id})})))}function jt(){var e=Object(W.g)().id,t=function(e){var t=e.supplier_id,a=Re("/api/suppliers/get?supplier_id=".concat(t));return{err:a.err,loading:a.loading,result:a.result}}({supplier_id:e}),a=t.err,r=t.loading,c=t.result,i=function(e){var t=e.supplier_id,a=e.available,r=new URLSearchParams;t&&r.append("supplier_id",t),null!=a&&r.append("available",a);var n=Re("/api/products/getall?".concat(r));return{err:n.err,loading:n.loading,result:n.result}}({supplier_id:e,visible:!0}),o=i.err,l=i.loading,s=i.result;return r||l?n.a.createElement(ae,{loading:!0}):a||o?n.a.createElement(ne,{errors:[a,o]}):(console.log(c),n.a.createElement(G,null,n.a.createElement(pt,{title:c.supplier_name||"Supplier"}),n.a.createElement(vt,{supplier:c}),n.a.createElement(xt,{products:s})))}var yt=Object(M.a)({searchbar:{display:"flex",width:"100%",alignItems:"center",justifyContent:"space-evenly"}});function kt(e){var t=e.search,a=e.setSearch,c=yt(),o=Object(r.useState)(t),l=Object(i.a)(o,2),s=l[0],u=l[1];return Object(r.useEffect)((function(){""===s&&a(s)}),[s]),n.a.createElement("div",{className:c.searchbar},n.a.createElement(oe,{type:"Search",label:"Search",onChange:function(e){u(e.target.value)}}),n.a.createElement(pe,{onClick:function(){a(s)}}," Search "))}function _t(){var e=A().settings,t=Object(r.useState)(0),a=Object(i.a)(t,2),c=a[0],o=a[1],l=Object(r.useState)(""),d=Object(i.a)(l,2),p=d[0],m=d[1];Object(r.useEffect)((function(){o(0)}),[p]);var f=function(e){var t=e.supplier_id,a=e.product_name,n=e.page_no,c=e.available,o=e.city_id,l=new URLSearchParams;t&&l.append("supplier_id",t),a&&l.append("product_name",a),n&&l.append("page_no",n),o&&l.append("city_id",o),null===c&&void 0===c||l.append("available",c);var d="/api/products/search?".concat(l),p=Object(r.useState)(!1),m=Object(i.a)(p,2),f=m[0],b=m[1],h=Object(r.useState)([]),E=Object(i.a)(h,2),v=E[0],g=E[1],w=Object(r.useState)(""),O=Object(i.a)(w,2),x=O[0],j=O[1],k=Object(r.useState)(!1),_=Object(i.a)(k,2),C=_[0],S=_[1];return Object(r.useEffect)((function(){g([])}),[t,a,c]),Object(r.useEffect)((function(){a&&function(){var e=Object(u.a)(s.a.mark((function e(){var t,a,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b(!0),t={method:"GET",headers:{"content-type":"application/json"}},e.next=5,fetch(d,t);case 5:if((a=e.sent).ok){e.next=10;break}return j(a.statusText),b(!1),e.abrupt("return");case 10:return e.next=12,a.json();case 12:r=e.sent,g((function(e){return Object(y.a)(new Set([].concat(Object(y.a)(e),Object(y.a)(r))))})),S(10===r.length),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),j(e.t0);case 20:return e.prev=20,b(!1),e.finish(20);case 23:case"end":return e.stop()}}),e,null,[[0,17,20,23]])})));return function(){return e.apply(this,arguments)}}()().catch((function(e){j(e),b(!1)}))}),[a,t,n,c]),{err:x,loading:f,products:v,hasMore:C}}({available:!0,city_id:e.city_id,product_name:p,page_no:c}),b=f.err,h=f.loading,E=f.products,v=f.hasMore;return n.a.createElement(G,null,n.a.createElement(pt,{title:"Search"}),n.a.createElement(kt,{search:p,setSearch:m}),b&&n.a.createElement(ne,{errors:[b]}),n.a.createElement(xt,{products:E}),v&&n.a.createElement(pe,{onClick:function(){v&&o((function(e){return e+1}))},variant:"text"},"See More"),n.a.createElement(ae,{loading:h,style:{marginLeft:"auto",marginRight:"auto"}}))}var Ct=Object(M.a)({fullscreen:{display:"flex",flexDirection:"column",backgroundColor:V.PRIMARY_RED,flex:1,alignItems:"center",justifyContent:"center",height:"100%",minHeight:"100vh"}});function St(e){var t=e.children,a=Ct();return n.a.createElement("div",{className:a.fullscreen},t)}var Tt=Object(M.a)({links:{color:" #f2f2f2",textDecoration:"solid",fontSize:"2em",fontWeight:"bold","&:hover":{transform:"scale(1.1)"}},container:{display:"flex",flexDirection:"column",padding:10,alignItems:"center"}});function Pt(){var e=Tt(),t=Object.entries(Pe);return n.a.createElement(we.a,{className:e.container},t.map((function(t){var a=Object(i.a)(t,2),r=a[0],c=a[1];return n.a.createElement(q.b,{to:c,className:e.links},r)})))}function Rt(){return n.a.createElement(St,null,n.a.createElement(H,null),n.a.createElement(Pt,null))}function Nt(e){var t=e.product_id,a=Re("/api/products/get?product_id=".concat(t));return{err:a.err,loading:a.loading,result:a.result}}function At(e){var t=e.product;return n.a.createElement(xe,null,n.a.createElement("h2",null," ",t.product_name," "),n.a.createElement("b",null,"Price: Rs.",t.price),n.a.createElement(Et,{src:"/images/".concat(t.image_id)}),n.a.createElement("p",null," ",t.product_description," "))}var It=Object(M.a)({quantity:{display:"flex",alignItems:"center",justifyContent:"space-evenly"}});function Dt(e){var t=e.quantity,a=e.setQuantity,r=e.min,c=void 0===r?1:r,i=e.max,o=void 0===i?99:i,l=It();return n.a.createElement("div",{className:l.quantity},n.a.createElement(pe,{onClick:function(){t>c&&a(t-1)}}," - "),n.a.createElement("b",null," ",t),n.a.createElement(pe,{onClick:function(){t<o&&a(t+1)}}," + "))}function qt(){var e=Object(W.g)().id,t=Nt({product_id:e}),a=t.loading,c=t.err,o=t.result,l=_().addToCart,s=Object(r.useState)(1),u=Object(i.a)(s,2),d=u[0],p=u[1];return n.a.createElement(G,null,n.a.createElement(pt,{title:"Product"}),n.a.createElement(ae,{loading:a}),c&&n.a.createElement(ne,{errors:[c]}),o&&n.a.createElement(se,null,n.a.createElement(At,{product:o}),n.a.createElement(Dt,{quantity:d,setQuantity:p}),n.a.createElement(pe,{onClick:function(){l({product_id:e},d)}},"Add To Cart"," ")))}var Wt=a(194),Lt=a(195),Mt=a(196),Ut=a(197),Ft=a(198),Yt=a(199),Jt=Object(M.a)({container:{maxWidth:1e3,width:"90%",margin:10},table:{width:"100%"},head:{backgroundColor:V.PRIMARY_RED,color:V.PRIMARY_WHITE,fontWeight:"bolder"}});function Bt(e){var t=e.orders,a=void 0===t?[]:t,r=Jt(),c=Object(W.f)();return n.a.createElement(Wt.a,{component:z.a,className:r.container},n.a.createElement(Lt.a,{"aria-label":"cart table",className:r.table},n.a.createElement(Mt.a,{className:r.head},n.a.createElement(Ut.a,null,n.a.createElement(Ft.a,{align:"center",className:r.head},"Name"),n.a.createElement(Ft.a,{align:"center",className:r.head},"Price"),n.a.createElement(Ft.a,{align:"center",className:r.head},"Quantity"),n.a.createElement(Ft.a,{align:"center",className:r.head},"Total"))),n.a.createElement(Yt.a,null,a.map((function(e){return n.a.createElement(Ut.a,{key:e.product_id,onClick:function(){c.push("".concat(Pe.Cart,"/").concat(e.product_id))}},n.a.createElement(Ft.a,{component:"th",scope:"row",align:"center"},e.product_name),n.a.createElement(Ft.a,{align:"center"},e.price),n.a.createElement(Ft.a,{align:"center"},e.quantity),n.a.createElement(Ft.a,{align:"center"},parseInt(e.price*e.quantity)))})),n.a.createElement(Ut.a,{key:"Total"},n.a.createElement(Ft.a,{component:"th",scope:"row",align:"center"}," ","Total"," "),n.a.createElement(Ft.a,{align:"center"}," "),n.a.createElement(Ft.a,{align:"center"}," "),n.a.createElement(Ft.a,{align:"center"},a.reduce((function(e,t){return parseInt(e)+parseInt(t.price*t.quantity)}),0))))))}function Ht(e){var t=function(e){var t=e.cart,a=void 0===t?[]:t,n=Object(r.useState)(!1),c=Object(i.a)(n,2),o=c[0],l=c[1],d=Object(r.useState)({cart_orders:[]}),p=Object(i.a)(d,2),m=p[0],f=p[1],b=Object(r.useState)(),h=Object(i.a)(b,2),E=h[0],v=h[1];return Object(r.useEffect)((function(){0!==a.length?(l(!0),fetch("/api/user/orders/getproductcost",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({orders:a})}).then(function(){var e=Object(u.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.ok){e.next=7;break}return e.next=3,t.text();case 3:if(e.t0=e.sent,e.t0){e.next=6;break}e.t0="Something Went Wrong";case 6:throw e.t0;case 7:return e.abrupt("return",t.json());case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(e){f(e)})).catch((function(e){v(e)})).finally((function(){l(!1)}))):f({cart_orders:[]})}),[a]),{err:E,loading:o,result:m}}({cart:e.cart}),a=t.err,c=t.loading,o=t.result;return c?n.a.createElement(ae,{loading:c,center:!0}):a?n.a.createElement(ne,{errors:[a]}):n.a.createElement(xe,null,n.a.createElement(Bt,{orders:o.cart_orders}))}function Vt(){var e=Object(W.f)(),t=_(),a=t.cart,r=t.clearCart;return n.a.createElement(G,null,n.a.createElement(pt,{title:"Cart"}),n.a.createElement(se,null,n.a.createElement(Ht,{cart:a}),n.a.createElement(pe,{variant:"text",onClick:function(){window.confirm("Are You Sure?")&&r()}},"Clear Cart"),n.a.createElement(pe,{onClick:function(){e.push("".concat(Pe.Cart,"/order"))}},"Add Order")))}function zt(){var e,t=Object(W.g)().id,a=Object(W.f)(),c=Nt({product_id:t}),o=c.err,l=c.loading,s=c.result,u=_(),d=u.cart,p=void 0===d?[]:d,m=u.updateCartItemQuantity,f=u.removeFromCart,b=Object(r.useState)(parseInt(null===(e=p.find((function(e){return e.product_id===t})))||void 0===e?void 0:e.quantity)||1),h=Object(i.a)(b,2),E=h[0],v=h[1];return n.a.createElement(G,null,n.a.createElement(pt,{title:"Product"}),n.a.createElement(ae,{loading:l}),o&&n.a.createElement(ne,{errors:[o]}),s&&n.a.createElement(se,null,n.a.createElement(At,{product:s}),n.a.createElement(Dt,{quantity:E,setQuantity:v}),n.a.createElement(pe,{onClick:function(){m(t,E)}},"Update Cart"),n.a.createElement(pe,{variant:"text",onClick:function(){window.confirm("Are You Sure You Want To Remove?")&&(f(t),alert("Item Removed"),a.goBack())}},"Remove From Cart")))}function Qt(e){var t=e.total,a=e.deliveryCharge,r=e.suppliers;return n.a.createElement(n.a.Fragment,null,n.a.createElement("b",null," Total: ",t),n.a.createElement("b",null," ","Delivery Charge: ",a," from ",r," supplier(s)"),n.a.createElement("text",null,"Delivery Charge cost Extra for items ordered from different city"))}function Gt(e){var t=function(e){var t=e.cart,a=void 0===t?[]:t,n=e.address_id,c=Object(r.useState)(!1),o=Object(i.a)(c,2),l=o[0],d=o[1],p=Object(r.useState)({cart_orders:[],deliveryCharge:0,suppliers:0,total:0}),m=Object(i.a)(p,2),f=m[0],b=m[1],h=Object(r.useState)(),E=Object(i.a)(h,2),v=E[0],g=E[1];return Object(r.useEffect)((function(){0!==a.length&&n?(d(!0),fetch("/api/user/orders/getcost",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({orders:a,address_id:n})}).then(function(){var e=Object(u.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.ok){e.next=7;break}return e.next=3,t.text();case 3:if(e.t0=e.sent,e.t0){e.next=6;break}e.t0="Something Went Wrong";case 6:throw e.t0;case 7:return e.abrupt("return",t.json());case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(e){b(e)})).catch((function(e){g(e)})).finally((function(){d(!1)}))):b({cart_orders:[],deliveryCharge:0,suppliers:0,total:0})}),[a,n]),{err:v,loading:l,result:f}}({cart:e.cart,address_id:e.address_id}),a=t.err,c=t.loading,o=t.result;return n.a.createElement(se,null,c&&n.a.createElement(ae,{loading:!0,center:!0}),a&&n.a.createElement(re,null," ",a),n.a.createElement(Bt,{orders:o.cart_orders}),n.a.createElement(Qt,{total:o.total,deliveryCharge:o.deliveryCharge,suppliers:o.suppliers}))}function Xt(e){return Zt.apply(this,arguments)}function Zt(){return(Zt=Object(u.a)(s.a.mark((function e(t){var a,r,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={accessToken:t},e.next=3,fetch("/api/validate",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(a)});case 3:if((r=e.sent).ok){e.next=6;break}throw r.statusText;case 6:return e.next=8,r.json();case 8:return n=e.sent,e.abrupt("return",n.valid);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $t(e){var t=Object(r.useState)(!0),a=Object(i.a)(t,2),n=a[0],c=a[1],o=Object(r.useState)(),l=Object(i.a)(o,2),p=l[0],m=l[1],f=Object(r.useState)(""),b=Object(i.a)(f,2),h=b[0],E=b[1],v=g(),O=v.accessToken,x=v.setAccessToken,j=w().refreshToken,y=function(){var e=Object(u.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xt(O);case 2:if(!e.sent){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,d(j);case 7:t=e.sent,x(t);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(){var t=Object(u.a)(s.a.mark((function t(){var a,r,n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={method:"GET",headers:{authorization:"bearer ".concat(O),"content-type":"application/json"}},t.next=3,fetch(e,a);case 3:if((r=t.sent).ok){t.next=11;break}return t.next=7,r.text();case 7:if(t.t0=t.sent,t.t0){t.next=10;break}t.t0=r.statusText();case 10:throw t.t0;case 11:return t.next=13,r.json();case 13:return n=t.sent,t.abrupt("return",n);case 15:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),_=function(){var e=Object(u.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(!0),e.prev=1,e.next=4,y();case 4:return e.next=6,k();case 6:t=e.sent,m(t),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),E(e.t0);case 13:return e.prev=13,c(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[1,10,13,16]])})));return function(){return e.apply(this,arguments)}}(),C=_;return Object(r.useEffect)((function(){_()}),[e]),{loading:n,result:p,err:h,reloadResources:C}}function Kt(){var e=$t("/api/user/address/getall"),t=e.err,a=e.loading,r=e.reloadResources,n=e.result;return{err:t,loading:a,result:void 0===n?[]:n,reloadResources:r}}var ea=Object(M.a)((function(e){return{formControl:{margin:e.spacing(1),minWidth:120}}}));function ta(e){var t=e.value,a=e.setValue,r=ea(),c=Kt(),i=c.err,o=c.loading,l=c.result,s=void 0===l?[]:l;return o?n.a.createElement(ae,{loading:!0}):i?n.a.createElement(ne,{errors:[i,"Can't Display Catagories"]}):(!t&&s.length>0&&a(s[0].address_id),n.a.createElement(Ye.a,{className:r.formControl},n.a.createElement(Je.a,{id:"demo-simple-select-label"},"city"),n.a.createElement(Be.a,{labelId:"city",value:t,onChange:function(e){a(e.target.value)}},s.map((function(e){return n.a.createElement(He.a,{key:e.address_id,value:e.address_id},"".concat(e.street_name,", ").concat(e.city_name))})))))}function aa(){return ra.apply(this,arguments)}function ra(){return(ra=Object(u.a)(s.a.mark((function e(){var t,a,r,n,c,i,o=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:"POST",a=o.length>1?o[1]:void 0,r=o.length>2?o[2]:void 0,n=sessionStorage.getItem("accessToken"),c=localStorage.getItem("refreshToken"),e.next=7,Xt(n);case 7:if(e.sent){e.next=13;break}return e.next=11,d(c);case 11:n=e.sent,sessionStorage.setItem("accessToken",n);case 13:return i={method:t,headers:{authorization:"bearer ".concat(n),"content-type":"application/json"}},r&&"GET"!==t&&(i=Object(S.a)(Object(S.a)({},i),{},{body:JSON.stringify(r)})),e.next=17,fetch(a,i);case 17:return e.abrupt("return",e.sent);case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function na(e,t){return ca.apply(this,arguments)}function ca(){return(ca=Object(u.a)(s.a.mark((function e(t,a){var r,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/user/orders/add","POST",e.next=4,aa("POST","/api/user/orders/add",{orders:t,address_id:a});case 4:if((r=e.sent).ok){e.next=7;break}throw"Order Failed";case 7:return e.next=9,r.json();case 9:return n=e.sent,e.abrupt("return",n);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ia(){var e=_().cart,t=Object(r.useState)(""),a=Object(i.a)(t,2),c=a[0],o=a[1],l=Object(W.f)();return n.a.createElement(G,null,n.a.createElement(pt,{title:"Add Order"}),n.a.createElement(ta,{value:c,setValue:o}),n.a.createElement(pe,{variant:"text",onClick:function(){l.push("".concat(Pe.Address,"/add"))}},"Add Address"),n.a.createElement(Gt,{cart:e,address_id:c}),n.a.createElement(pe,{onClick:Object(u.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,window.confirm("Do You Want To Order?")){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,na(e,c);case 6:t.sent&&window.alert("Order Sucessful"),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),window.alert("Failed To Add Order");case 13:case"end":return t.stop()}}),t,null,[[0,10]])})))},"Order"))}function oa(e){return la.apply(this,arguments)}function la(){return(la=Object(u.a)(s.a.mark((function e(t){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"DELETE","/api/user/address/delete",e.next=4,aa("DELETE","/api/user/address/delete",{address_id:t});case 4:return a=e.sent,e.abrupt("return",a.ok);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function sa(e){var t=e.address;return n.a.createElement(n.a.Fragment,null,n.a.createElement(Me,null,"".concat(t.street_name,", ").concat(t.city_name)),t.details&&n.a.createElement("text",{style:{textAlign:"center"}},t.details))}var ua=Object(M.a)({container:{width:"100%",alignItems:"center",display:"flex",flexDirection:"column",flex:1}});function da(e){var t=e.address,a=e.onDelete,r=ua();return n.a.createElement("div",{className:r.container},n.a.createElement(sa,{address:t}),n.a.createElement(pe,{variant:"text",onClick:Object(u.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,window.confirm("Are You Sure You Want To Delete?")){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,oa(t.address_id);case 6:if(!e.sent){e.next=11;break}if(alert("Address Deleted"),!a){e.next=11;break}return e.abrupt("return",a());case 11:return e.abrupt("return",alert("Failed To Delete"));case 14:e.prev=14,e.t0=e.catch(0),alert("Failed To Delete");case 17:case"end":return e.stop()}}),e,null,[[0,14]])})))}," Delete Address "))}function pa(){var e=Kt(),t=e.err,a=e.loading,r=e.result,c=e.reloadResources,i=Object(W.f)();return n.a.createElement(G,null,n.a.createElement(pt,{title:"Address"}),n.a.createElement(pe,{variant:"text",onClick:function(){i.push("".concat(Pe.Address,"/add"))}},"Add Address"),n.a.createElement(se,null,n.a.createElement(pe,{variant:"text",onClick:c},"Reload"),a&&n.a.createElement(ae,{loading:a}),t&&n.a.createElement(ne,{errors:[t]}),r.map((function(e){return n.a.createElement(da,{key:e.address_id,address:e,onDelete:c})}))))}function ma(e){return fa.apply(this,arguments)}function fa(){return(fa=Object(u.a)(s.a.mark((function e(t){var a,r,n,c,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.city_id,r=t.street_name,n=t.details,c={city_id:a,street_name:r,details:n},"/api/user/address/add","POST",e.next=6,aa("POST","/api/user/address/add",c);case 6:if((i=e.sent).ok){e.next=14;break}return e.next=10,i.text();case 10:if(e.t0=e.sent,e.t0){e.next=13;break}e.t0="Something Went Wrong";case 13:throw e.t0;case 14:return e.abrupt("return",i.ok);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ba(){var e=Object(W.f)();return n.a.createElement(X.b,{initialValues:{city_id:"",street_name:"",details:""},validate:function(e){var t={};return e.city_id||(t.city_id="Select A City"),e.street_name||(t.street_name="Streen Name Must Be Provided"),t},onSubmit:function(){var t=Object(u.a)(s.a.mark((function t(a,r){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.setSubmitting,t.prev=1,n(!0),t.next=5,ma(a);case 5:t.sent&&(alert("Address Added"),e.goBack()),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),alert(t.t0);case 12:return t.prev=12,n(!1),t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[1,9,12,15]])})));return function(e,a){return t.apply(this,arguments)}}()},(function(e){var t=e.values,a=e.isSubmitting,r=e.handleSubmit,c=e.handleChange,i=e.errors;return n.a.createElement(se,null,n.a.createElement(ae,{loading:a}),i.city_id&&n.a.createElement(ne,{errors:[i.city_id]}),n.a.createElement(ze,{value:t.city_id,setValue:c("city_id"),error:!!i.city_id,errorText:i.city_id}),n.a.createElement(X.a,{name:"street_name",type:"text",label:"Street Name",error:!!i.street_name,helperText:i.street_name,as:oe}),n.a.createElement(oe,{label:"Details",type:"text",onChange:c("details"),multiline:!0,error:!!i.details,helperText:i.details,rowsMax:5}),n.a.createElement(pe,{onClick:r},"Add Address"))}))}function ha(){return n.a.createElement(G,null,n.a.createElement(pt,{title:"Add Address"}),n.a.createElement(ba,null))}var Ea=Object(M.a)((function(e){return{formControl:{margin:e.spacing(1),minWidth:120}}}));function va(e){var t=e.orderStatus,a=e.setOrderStatus,r=function(){var e=Re("/api/orderstatus"),t=e.loading,a=e.err,r=e.result;return{loading:t,err:a,result:void 0===r?[]:r}}(),c=r.err,i=r.loading,o=r.result,l=Ea();return i?n.a.createElement(ae,{loading:!0}):c?n.a.createElement(ne,{errors:[c,"Can't Display Order Types"]}):n.a.createElement(Ye.a,{className:l.formControl},n.a.createElement(Je.a,{id:"demo-simple-select-label"},"Order Status"),n.a.createElement(Be.a,{labelId:"Order Status",value:t,onChange:function(e){a(e.target.value)}},n.a.createElement(He.a,{key:"All",value:""},"All"),o.map((function(e){return n.a.createElement(He.a,{key:e,value:e},String(e))}))))}function ga(e){var t=e.order,a=Date.parse(t.ordered_time),r=function(e){var t=Math.floor(e/864e5);if(t>0)return"".concat(t," day(s) ago");var a=Math.floor(e/6e4%60),r=Math.floor(e/36e5%24);return r>0?"".concat(r," hour(s) ").concat(a," minute(s) ago"):"".concat(a," minute(s) ago")}(Date.now()-a);return n.a.createElement(n.a.Fragment,null,n.a.createElement("b",null,t.order_id),n.a.createElement("text",null,r),n.a.createElement("text",null,t.order_status))}var wa=Object(M.a)({list:{width:"100%",border:1,display:"flex",flexDirection:"column",padding:5,marginTop:5,"&:hover":{backgroundColor:V.PRIMARY_WHITE}}});function Oa(e){var t=e.orders,a=void 0===t?[]:t,r=wa(),c=Object(W.f)();return n.a.createElement(se,null,a.map((function(e){return n.a.createElement("div",{className:r.list,onClick:function(){c.push("".concat(Pe.Orders,"/").concat(e.order_id))}},n.a.createElement(ga,{order:e}))})))}function xa(){var e=Object(r.useState)(""),t=Object(i.a)(e,2),a=t[0],c=t[1],o=function(e){var t=e.order_status,a=new URLSearchParams;t&&a.append("order_status",t);var r=$t("/api/user/orders/getall?".concat(a)),n=r.err,c=r.loading,i=r.result;return{err:n,loading:c,result:void 0===i?[]:i,reloadResources:r.reloadResources}}({order_status:a}),l=o.err,s=o.loading,u=o.result,d=o.reloadResources;return n.a.createElement(G,null,n.a.createElement(pt,{title:"Orders"}),n.a.createElement(pe,{variant:"text",onClick:d},"Reload"),n.a.createElement(va,{orderStatus:a,setOrderStatus:c}),l&&n.a.createElement(ne,{errors:[l]}),s&&n.a.createElement(ae,{loading:s}),u.length>=0&&n.a.createElement(Oa,{orders:u}))}var ja=Object(M.a)({container:{maxWidth:1e3,width:"90%",margin:10},table:{width:"100%"},head:{backgroundColor:V.PRIMARY_RED,color:V.PRIMARY_WHITE,fontWeight:"bolder"}});function ya(e){var t=e.orders,a=void 0===t?[]:t,r=ja(),c=Object(W.f)();return n.a.createElement(Wt.a,{component:z.a,className:r.container},n.a.createElement(Lt.a,{"aria-label":"cart table",className:r.table},n.a.createElement(Mt.a,{className:r.head},n.a.createElement(Ut.a,null,n.a.createElement(Ft.a,{align:"center",className:r.head},"Name"),n.a.createElement(Ft.a,{align:"center",className:r.head},"Price"),n.a.createElement(Ft.a,{align:"center",className:r.head},"Quantity"),n.a.createElement(Ft.a,{align:"center",className:r.head},"Total"))),n.a.createElement(Yt.a,null,a.map((function(e){return n.a.createElement(Ut.a,{key:e.product_id,onClick:function(){c.push("/products/".concat(e.product_id))}},n.a.createElement(Ft.a,{component:"th",scope:"row",align:"center"},e.product_name),n.a.createElement(Ft.a,{align:"center"},e.price),n.a.createElement(Ft.a,{align:"center"},e.quantity),n.a.createElement(Ft.a,{align:"center"},parseInt(e.price*e.quantity)))})),n.a.createElement(Ut.a,{key:"Total"},n.a.createElement(Ft.a,{component:"th",scope:"row",align:"center"}," ","Total"," "),n.a.createElement(Ft.a,{align:"center"}," "),n.a.createElement(Ft.a,{align:"center"}," "),n.a.createElement(Ft.a,{align:"center"},a.reduce((function(e,t){return parseInt(e)+parseInt(t.price*t.quantity)}),0))))))}function ka(e){return _a.apply(this,arguments)}function _a(){return(_a=Object(u.a)(s.a.mark((function e(t){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"PUT","/api/user/orders/cancel",e.next=4,aa("PUT","/api/user/orders/cancel",{order_id:t});case 4:if((a=e.sent).ok){e.next=12;break}return e.next=8,a.text();case 8:if(e.t0=e.sent,e.t0){e.next=11;break}e.t0="Failed To Cancel";case 11:throw e.t0;case 12:return e.abrupt("return",a.ok);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ca(){var e=Object(W.g)().id,t=function(e){var t=e.order_id,a=$t("/api/user/orders/get?order_id=".concat(t));return{err:a.err,loading:a.loading,result:a.result,reloadResources:a.reloadResources}}({order_id:e}),a=t.err,r=t.loading,c=t.result,i=t.reloadResources;return r?n.a.createElement(ae,{center:!0,loading:!0}):a?n.a.createElement(ne,{errors:[a]}):n.a.createElement(se,null,n.a.createElement(pe,{onClick:i,variant:"text"},"Reload"),n.a.createElement(ga,{order:c.order}),n.a.createElement(sa,{address:c.address}),n.a.createElement(ya,{orders:c.ordered_items}),n.a.createElement(Qt,{suppliers:c.numOfSuppliers,deliveryCharge:c.deliveryCharge,total:c.total}),n.a.createElement(pe,{variant:"text",onClick:Object(u.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,window.confirm("Are You Sure You Want To Cancel")){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,ka(e);case 6:if(!t.sent){t.next=10;break}return alert("Order Cancelled"),t.abrupt("return",i());case 10:alert("Faied To Cancel"),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),alert(t.t0);case 16:case"end":return t.stop()}}),t,null,[[0,13]])})))},"Cancel Order"))}function Sa(){return n.a.createElement(G,null,n.a.createElement(pt,{title:"Order"}),n.a.createElement(Ca,null))}function Ta(e){return Pa.apply(this,arguments)}function Pa(){return(Pa=Object(u.a)(s.a.mark((function e(t){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw"Not Logged In";case 2:return"/api/logout",e.next=5,fetch("/api/logout",{method:"DELETE",headers:{"content-type":"application/json"},body:JSON.stringify({refreshToken:t})});case 5:return a=e.sent,e.abrupt("return",a.ok);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ra(){var e=w(),t=e.refreshToken,a=e.setRefreshToken,r=g().setAccessToken,c=function(){var e=Object(u.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,window.confirm("Are You Sure?")){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,Ta(t);case 6:if(!e.sent){e.next=11;break}return a(""),r(""),e.abrupt("return");case 11:alert("Failed To LogOut"),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),alert(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}();return n.a.createElement(pe,{variant:"text",onClick:c},"Logout")}function Na(){var e=x().setContinueWithoutLogin;return n.a.createElement(pe,{variant:"text",onClick:function(){e(!1)}},"Log In")}var Aa=a(216);function Ia(){var e=Object(W.f)();return n.a.createElement(n.a.Fragment,null,n.a.createElement(Ze.a,{button:!0,onClick:function(){e.push(Pe.Cart)}},n.a.createElement($e.a,null,n.a.createElement(rt.a,null)),n.a.createElement(Ke.a,null,"Cart")),n.a.createElement(Ze.a,{button:!0,onClick:function(){e.push(Pe.Orders)}},n.a.createElement($e.a,null,n.a.createElement(ct.a,null)),n.a.createElement(Ke.a,null,"Orders")),n.a.createElement(Ze.a,{button:!0,onClick:function(){e.push(Pe.Address)}},n.a.createElement($e.a,null,n.a.createElement(nt.a,null)),n.a.createElement(Ke.a,null,"Address")),n.a.createElement(Ze.a,{button:!0,onClick:function(){e.push("".concat(Pe.User,"/changepassword"))}},n.a.createElement($e.a,null,n.a.createElement(Aa.a,null)),n.a.createElement(Ke.a,null,"Change Password")))}function Da(){var e=O();return n.a.createElement(G,null,n.a.createElement(pt,{title:"User"}),n.a.createElement(se,null,n.a.createElement(Ia,null),e?n.a.createElement(Ra,null):n.a.createElement(Na,null)))}function qa(e,t){return Wa.apply(this,arguments)}function Wa(){return(Wa=Object(u.a)(s.a.mark((function e(t,a){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/user/changepassword","PUT",e.next=4,aa("PUT","/api/user/changepassword",{old_password:t,new_password:a});case 4:if((r=e.sent).ok){e.next=12;break}return e.next=8,r.text();case 8:if(e.t0=e.sent,e.t0){e.next=11;break}e.t0="Failed To Update";case 11:throw e.t0;case 12:return e.abrupt("return",r.ok);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function La(){return n.a.createElement(X.b,{initialValues:{oldpassword:"",newpassword:"",renewpassword:""},validate:function(e){var t={};return Object(he.validatePassword)(e.newpassword)||(t.newpassword="Invalid Password"),0===e.newpassword.length&&(t.newpassword="Password Cant be Empty"),e.renewpassword!==e.newpassword&&(t.renewpassword="Passwords Donot Match"),t},onSubmit:function(){var e=Object(u.a)(s.a.mark((function e(t,a){var r,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.setSubmitting,n=a.resetForm,r(!0),e.prev=2,e.next=5,qa(t.oldpassword,t.newpassword);case 5:if(!e.sent){e.next=8;break}alert("Password Changed"),n();case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),alert(e.t0);case 13:return e.prev=13,r(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[2,10,13,16]])})));return function(t,a){return e.apply(this,arguments)}}()},(function(e){var t=e.values,a=e.handleSubmit,r=e.handleBlur,c=e.handleChange,i=e.isSubmitting,o=e.errors;return n.a.createElement(se,null,i&&n.a.createElement(ae,{loading:i}),n.a.createElement(oe,{label:"Old Password",value:t.oldpassword,type:"password",error:!!o.oldpassword,helperText:o.oldpassword,onChange:c("oldpassword"),onBlur:r("oldpassword")}),n.a.createElement(oe,{label:"New Password",value:t.newpassword,type:"password",error:!!o.newpassword,helperText:o.newpassword,onChange:c("newpassword"),onBlur:r("newpassword")}),n.a.createElement(oe,{label:"Retype Password",value:t.renewpassword,type:"password",error:!!o.renewpassword,helperText:o.renewpassword,onChange:c("renewpassword"),onBlur:r("renewpassword")}),n.a.createElement(pe,{onClick:a},"Change Password"))}))}function Ma(){var e=O();return n.a.createElement(G,null,n.a.createElement(pt,{title:"Change Password"}),e?n.a.createElement(La,null):n.a.createElement(re,null,"You're Not Logged In"))}function Ua(){return n.a.createElement(q.a,null,n.a.createElement(W.c,null,n.a.createElement(W.a,{exact:!0,path:"/",component:Rt}),n.a.createElement(W.a,{exact:!0,path:Pe.Home,component:mt}),n.a.createElement(W.a,{exact:!0,path:Pe.Search,component:_t}),n.a.createElement(W.a,{exact:!0,path:Pe.Cart,component:Vt}),n.a.createElement(W.a,{exact:!0,path:"".concat(Pe.Cart,"/order"),component:ia}),n.a.createElement(W.a,{exact:!0,path:"".concat(Pe.Cart,"/:id"),component:zt}),n.a.createElement(W.a,{exact:!0,path:Pe.Address,component:pa}),n.a.createElement(W.a,{exact:!0,path:"".concat(Pe.Address,"/add"),component:ha}),n.a.createElement(W.a,{exact:!0,path:Pe.Orders,component:xa}),n.a.createElement(W.a,{exact:!0,path:"".concat(Pe.Orders,"/:id"),component:Sa}),n.a.createElement(W.a,{exact:!0,path:Pe.User,component:Da}),n.a.createElement(W.a,{exact:!0,path:"".concat(Pe.User,"/changepassword"),component:Ma}),n.a.createElement(W.a,{exact:!0,path:"/suppliers/:id",component:jt}),n.a.createElement(W.a,{exact:!0,path:"/products/:id",component:qt})))}function Fa(){var e=Object(r.useState)(""),t=Object(i.a)(e,2),a=t[0],c=t[1],o=A().dispatch;return n.a.createElement(G,null,n.a.createElement(ze,{value:a,setValue:function(e){return c(e)}}),n.a.createElement(pe,{disabled:!Boolean(a),onClick:function(){o({type:R,payload:a})}}," Set City "))}function Ya(){return A().settings.city_id?n.a.createElement(Ua,null):n.a.createElement(Fa,null)}function Ja(){var e=Object(r.useContext)(m),t=O(),a=Object(r.useContext)(b),i=x().continueWithoutLogin;return e?n.a.createElement(c.a,null):t&&a===D.USER||i?n.a.createElement(Ya,null):n.a.createElement(Te,null)}t.default=function(){return n.a.createElement(I,null,n.a.createElement(j,null,n.a.createElement(C,null,n.a.createElement(Ja,null))))}},90:function(e){e.exports=JSON.parse('{"Home":"/home","Search":"/search","Cart":"/cart","Address":"/address","Orders":"/orders","User":"/user"}')},95:function(e){e.exports=JSON.parse('{"PRIMARY_RED":"#FF2D2D","PRIMARY_WHITE":"#F2F2F2","PRIMARY_DARK":"#080808"}')}}]);
//# sourceMappingURL=7.550bea85.chunk.js.map